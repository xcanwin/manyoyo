<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />
    <title>MANYOYO Web</title>
    <link rel="stylesheet" href="/app/frontend/app.css" />
    <link rel="stylesheet" href="/app/vendor/xterm.css" />
</head>
<body>
    <div class="app">
        <aside class="sidebar">
            <div class="sidebar-top">
                <div class="brand-wrap">
                    <div class="brand">MANYOYO Web</div>
                    <div class="brand-sub">Container Session Console</div>
                </div>
                <button
                    type="button"
                    id="mobileSidebarClose"
                    class="secondary mobile-sidebar-close"
                    aria-label="关闭会话列表"
                >关闭</button>
            </div>
            <form class="new-session" id="newSessionForm">
                <input id="newSessionName" placeholder="容器名 (例如 my-dev)" />
                <button type="submit">新建</button>
            </form>
            <div class="session-head">
                <span>会话</span>
                <span id="sessionCount">0 个</span>
            </div>
            <div id="sessionList"></div>
        </aside>
        <main class="main">
            <header class="header">
                <div class="header-main">
                    <div class="header-main-top">
                        <button
                            type="button"
                            id="mobileSessionToggle"
                            class="secondary mobile-session-toggle"
                            aria-expanded="false"
                            aria-controls="sessionList"
                        >会话</button>
                        <h1 id="activeTitle">未选择会话</h1>
                        <button
                            type="button"
                            id="mobileActionsToggle"
                            class="secondary mobile-actions-toggle"
                            aria-expanded="false"
                            aria-controls="headerActions"
                        >更多</button>
                    </div>
                    <div id="activeMeta">请选择左侧会话</div>
                </div>
                <div class="header-actions" id="headerActions">
                    <button type="button" id="refreshBtn" class="secondary">刷新</button>
                    <button type="button" id="removeBtn" class="danger-outline">删除容器</button>
                    <button type="button" id="removeAllBtn" class="danger">删除对话</button>
                </div>
            </header>
            <section class="mode-switch" id="modeSwitch">
                <div class="mode-switch-left">
                    <button type="button" id="modeCommandBtn" class="secondary is-active">命令模式</button>
                    <button type="button" id="modeTerminalBtn" class="secondary">交互终端</button>
                </div>
                <div class="mode-terminal-controls">
                    <button type="button" id="terminalConnectBtn">连接终端</button>
                    <button type="button" id="terminalDisconnectBtn" class="secondary">断开终端</button>
                    <span id="terminalStatus" class="terminal-status">未连接</span>
                </div>
            </section>
            <section id="messages"></section>
            <section id="terminalPanel" hidden>
                <div id="terminalScreen" aria-label="终端输出区域"></div>
                <div class="terminal-foot">点击终端后可直接输入；适用于 codex / claude 等交互式 agent。</div>
            </section>
            <form class="composer" id="composer">
                <div class="composer-inner">
                    <textarea id="commandInput" placeholder="输入容器命令，例如: ls -la"></textarea>
                    <button type="submit" id="sendBtn">发送</button>
                </div>
                <div class="composer-foot">
                    <span>Enter 发送 · Shift/Alt + Enter 换行</span>
                    <span id="sendState" class="send-state">未选择会话</span>
                </div>
            </form>
        </main>
        <div id="sidebarBackdrop" class="sidebar-backdrop" hidden></div>
    </div>

    <script src="/app/vendor/xterm.js"></script>
    <script src="/app/vendor/xterm-addon-fit.js"></script>
    <script src="/app/frontend/app.js"></script>
</body>
</html>
