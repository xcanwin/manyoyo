---
name: agents-init
description: "为当前仓库生成或更新中文版 AGENTS.md 协作指引。用户提到 $agents-init、请求仓库协作规范，或希望快速产出标准化 AGENTS.md（强调最小改动、TDD 偏好、提交与 PR 约定）时使用。"
---

# Agents Init（中文版）

快速、稳定地为当前仓库初始化或更新中文 `AGENTS.md`。
确保文档简洁可执行，并与仓库真实结构、命令和提交习惯一致。

## 核心流程
1. 读取 `references/workflow.md`，按既定探测顺序收集信息。
2. 从仓库文件与历史中提取事实，不做臆测。
3. 基于 `assets/AGENTS.zh.template.md` 起草 `AGENTS.md`。
4. 将模板占位符全部替换为仓库特有内容。
5. 按 `references/quality-checklist.md` 完成自检。
6. 写入或更新 `AGENTS.md`，并简要说明变更点。

## 执行规则
- 优先最小必要改动，避免无关重构。
- 默认使用中文沟通，除非用户明确要求其他语言。
- 不提供时间预估或时间承诺。
- 若存在多种可行方案，直接给出清晰选项与取舍。
- 未被明确要求时，不自动提交。
- 文档保持简洁，避免重复描述。

## 输出必备章节
确保最终 `AGENTS.md` 包含以下章节：
- `# 仓库协作指引`
- `## 协作偏好`
- `## 项目结构与模块组织`
- `## 构建、测试与开发命令`
- `## 编码风格与命名约定`
- `## TDD 模式`
- `## 测试指引`
- `## 提交与 PR 指引`
- `## 变更执行检查清单`

## 内容策略
- 指引必须具体且与当前仓库强相关。
- 给出可直接运行的命令示例（例如：`python3 tools/kcg_i18n.py`、`npm test`）。
- 依据近期 `git log` 归纳提交风格（语言、前缀、长度）。
- 若仓库存在多语言文档，明确双语一致性要求。

## 兜底处理
- 若缺少关键证据（如无构建脚本、无测试框架），在 `AGENTS.md` 中明确写明。
- 最终输出不得保留模板占位符。
- 若 `AGENTS.md` 已存在，优先原位增量更新并保留有效仓库特定内容。
